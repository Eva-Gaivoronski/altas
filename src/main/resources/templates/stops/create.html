<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Create Stop</title>
    <link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>

<div class="container">
    <h2>Create Stop</h2>

    <!-- Form for creating a new stop -->
    <form action="/stops/create" method="post" th:object="${stop}" enctype="multipart/form-data">
        <!-- Stop Name -->
        <label for="stopName">Stop Name:</label>
        <input type="text" id="stopName" name="stopName" th:field="*{name}" required>
        <div class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>

        <!-- Stop Description -->
        <label for="stopDescription">Stop Description:</label>
        <textarea id="stopDescription" name="stopDescription" th:field="*{stopDescription}" required></textarea>
        <div class="error" th:if="${#fields.hasErrors('stopDescription')}" th:errors="*{stopDescription}"></div>


        <!-- Additional Stop Details -->
        <!-- Include other fields as necessary, e.g., address, cost, latitude, longitude -->

        <!-- Image Upload -->
        <label for="image">Stop Image:</label>
        <input type="file" id="image" name="image" accept=".jpg, .jpeg, .png" required onchange="previewStopImage(this)">

        <!-- Image Preview -->
        <img id="stopImagePreview" class="image-preview" alt="Stop Image" style="display:none;">

        <!-- Submit Button -->
        <button type="submit" class="save-button">Save Stop</button>
    </form>

    <!-- Back to Tour Creation link -->
    <p><a href="/tours/create" class="back-to-tour-creation">Back to Tour Creation</a></p>
</div>

<script th:inline="javascript">
    function previewStopImage(input) {
        let imgElement = document.getElementById('stopImagePreview');
        if (input.files && input.files[0]) {
            let reader = new FileReader();
            reader.onload = function(e) {
                imgElement.style.display = 'block';
                imgElement.src = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        } else {
            imgElement.style.display = 'none';
        }
    }
</script>

</body>
</html>


